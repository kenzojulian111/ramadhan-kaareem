:root {
  --bg-a: #1b1f52;
  --bg-b: #1f6e7f;
  --bg-c: #3048a0;
  --bg-d: #0f1b3a;
  --text-main: #f5f7ff;
  --text-sub: rgba(245, 247, 255, 0.75);
  --accent: #d0e6ff;
}

*,
*::before,
*::after {
  box-sizing: border-box;
}

html,
body {
  margin: 0;
  min-height: 100%;
}

body {
  position: relative;
  overflow: hidden;
  color: var(--text-main);
  font-family: "Inter", sans-serif;
  background: #050914;
}

.scene {
  position: fixed;
  inset: 0;
  background:
    radial-gradient(circle at 18% 18%, color-mix(in oklab, var(--bg-a) 92%, white 8%) 0%, transparent 48%),
    radial-gradient(circle at 86% 20%, color-mix(in oklab, var(--bg-b) 92%, white 8%) 0%, transparent 45%),
    radial-gradient(circle at 52% 80%, color-mix(in oklab, var(--bg-c) 88%, black 12%) 0%, transparent 44%),
    linear-gradient(130deg, var(--bg-a), var(--bg-d));
  transition: background 24s linear, filter 24s linear;
  opacity: 0;
  transform: scale(1.04);
  animation: sceneIn 1.3s ease forwards;
}

.mesh-wrap {
  position: absolute;
  inset: -18vmax;
  filter: blur(44px) saturate(1.2);
}

.mesh {
  position: absolute;
  border-radius: 50%;
  opacity: 0.75;
  width: var(--size, 38vmax);
  height: var(--size, 38vmax);
  transform: translate3d(var(--x, 0), var(--y, 0), 0);
  transition: transform 24s linear, background-color 24s linear, opacity 24s linear;
}

.mesh-1 {
  background: var(--bg-a);
  left: -8vmax;
  top: -4vmax;
}

.mesh-2 {
  background: var(--bg-b);
  right: 4vmax;
  top: -6vmax;
}

.mesh-3 {
  background: var(--bg-c);
  left: 28vmax;
  bottom: -10vmax;
}

.mesh-4 {
  background: var(--bg-d);
  right: -8vmax;
  bottom: -12vmax;
}

.noise-overlay {
  pointer-events: none;
  position: fixed;
  inset: -120px;
  z-index: 30;
  opacity: 0.04;
  background-image:
    radial-gradient(circle at 24% 26%, rgba(255, 255, 255, 0.5) 0.3px, transparent 1px),
    radial-gradient(circle at 76% 64%, rgba(255, 255, 255, 0.48) 0.35px, transparent 1.1px),
    radial-gradient(circle at 52% 88%, rgba(255, 255, 255, 0.32) 0.4px, transparent 1.4px);
  background-size: 2px 2px, 3px 3px, 4px 4px;
  mix-blend-mode: soft-light;
}

.cursor-glow {
  pointer-events: none;
  position: fixed;
  z-index: 40;
  width: 280px;
  height: 280px;
  left: 0;
  top: 0;
  margin-left: -140px;
  margin-top: -140px;
  border-radius: 50%;
  opacity: 0;
  background: radial-gradient(circle, color-mix(in oklab, var(--accent) 40%, transparent 60%) 0%, transparent 70%);
  filter: blur(18px);
  transition: opacity 0.3s ease;
}

.floating-ui {
  position: fixed;
  z-index: 20;
  opacity: 0;
  transform: translateY(12px);
  transition: opacity 0.85s ease, transform 0.85s ease, background-color 1.1s ease, border-color 1.1s ease;
}

.top-bar {
  left: clamp(14px, 2.2vw, 30px);
  right: clamp(14px, 2.2vw, 30px);
  top: clamp(14px, 2.2vw, 30px);
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 12px;
}

.brand-name {
  font-family: "Playfair Display", serif;
  font-size: clamp(1rem, 1.7vw, 1.3rem);
  letter-spacing: 0.05em;
}

.meta {
  text-align: right;
}

.meta-line {
  margin: 0;
  font-size: clamp(0.72rem, 1.12vw, 0.9rem);
  font-weight: 500;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: var(--text-sub);
}

.hero {
  position: relative;
  z-index: 10;
  min-height: 100vh;
  display: grid;
  align-content: center;
  justify-items: center;
  text-align: center;
  padding: 22vh 16px 20vh;
  opacity: 0;
  transform: translateY(32px);
  transition: opacity 1s ease, transform 1s ease;
}

.hero-label {
  margin: 0 0 10px;
  font-size: clamp(0.72rem, 1.12vw, 0.94rem);
  font-weight: 500;
  letter-spacing: 0.15em;
  text-transform: uppercase;
  color: var(--text-sub);
}

.countdown {
  margin: 0;
  font-family: "Syne", sans-serif;
  font-size: clamp(3rem, 12vw, 11rem);
  font-weight: 300;
  line-height: 0.95;
  letter-spacing: 0.02em;
  text-shadow: 0 10px 40px rgba(0, 0, 0, 0.22), 0 2px 12px rgba(0, 0, 0, 0.28);
}

.countdown-hint {
  margin: 10px 0 0;
  font-family: "Playfair Display", serif;
  font-size: clamp(0.95rem, 1.45vw, 1.25rem);
  color: color-mix(in oklab, var(--text-main) 85%, transparent 15%);
}

.breathing {
  animation: breathing 4s ease-in-out infinite;
}

.hadith-card {
  left: clamp(14px, 2.2vw, 30px);
  bottom: clamp(14px, 2.2vw, 30px);
  width: min(420px, calc(100vw - 28px));
  border: 1px solid color-mix(in oklab, var(--text-main) 24%, transparent 76%);
  border-radius: 16px;
  backdrop-filter: blur(16px);
  background: color-mix(in oklab, var(--bg-d) 52%, transparent 48%);
  padding: 16px 16px 14px;
  box-shadow: 0 18px 48px rgba(0, 0, 0, 0.22);
}

.fasting-card {
  right: clamp(14px, 2.2vw, 30px);
  top: clamp(112px, 29vh, 260px);
  width: min(320px, calc(100vw - 28px));
  border: 1px solid color-mix(in oklab, var(--text-main) 24%, transparent 76%);
  border-radius: 16px;
  backdrop-filter: blur(16px);
  background: color-mix(in oklab, var(--bg-d) 52%, transparent 48%);
  padding: 14px 14px 13px;
  box-shadow: 0 18px 48px rgba(0, 0, 0, 0.22);
}

.card-tag {
  margin: 0 0 8px;
  font-size: 0.72rem;
  font-weight: 600;
  letter-spacing: 0.14em;
  text-transform: uppercase;
  color: var(--text-sub);
}

.fasting-day {
  margin: 0;
  font-size: 0.82rem;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: var(--text-sub);
}

.fasting-status {
  margin: 10px 0 0;
  font-family: "Syne", sans-serif;
  font-size: 1.08rem;
  letter-spacing: 0.01em;
  color: color-mix(in oklab, var(--text-main) 94%, transparent 6%);
}

.fasting-status[data-phase="active"] {
  color: color-mix(in oklab, var(--accent) 78%, var(--text-main) 22%);
}

.fasting-status[data-phase="complete"] {
  color: color-mix(in oklab, #7cffae 54%, var(--text-main) 46%);
}

.fasting-status[data-phase="upcoming"] {
  color: color-mix(in oklab, #ffd9ac 58%, var(--text-main) 42%);
}

.fasting-times {
  margin-top: 11px;
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 8px;
}

.fasting-time-item {
  margin: 0;
  padding: 9px 10px;
  border: 1px solid color-mix(in oklab, var(--text-main) 22%, transparent 78%);
  border-radius: 10px;
  display: grid;
  gap: 4px;
  background: color-mix(in oklab, var(--bg-d) 34%, transparent 66%);
}

.fasting-time-item span {
  font-size: 0.7rem;
  letter-spacing: 0.11em;
  text-transform: uppercase;
  color: var(--text-sub);
}

.fasting-time-item strong {
  font-family: "Syne", sans-serif;
  font-size: 1rem;
  font-weight: 500;
  letter-spacing: 0.02em;
  color: color-mix(in oklab, var(--text-main) 93%, transparent 7%);
}

.fasting-progress {
  position: relative;
  margin-top: 10px;
  height: 8px;
  border-radius: 999px;
  overflow: hidden;
  background: color-mix(in oklab, var(--text-main) 18%, transparent 82%);
}

.fasting-progress-fill {
  position: absolute;
  inset: 0 auto 0 0;
  width: 0;
  border-radius: 999px;
  background: linear-gradient(90deg, color-mix(in oklab, var(--accent) 56%, white 44%), color-mix(in oklab, var(--accent) 74%, transparent 26%));
  transition: width 0.9s ease;
}

.fasting-timing {
  margin: 10px 0 0;
  font-size: 0.82rem;
  letter-spacing: 0.05em;
  text-transform: uppercase;
  color: var(--text-sub);
}

.fasting-stats {
  margin: 9px 0 0;
  font-size: 0.83rem;
  letter-spacing: 0.03em;
  color: color-mix(in oklab, var(--text-main) 88%, transparent 12%);
}

.fasting-actions {
  margin-top: 11px;
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 8px;
}

.fasting-actions .ghost-btn {
  margin-top: 0;
}

.calendar-modal {
  position: fixed;
  inset: 0;
  z-index: 80;
  padding: clamp(14px, 2vw, 24px);
  display: grid;
  place-items: center;
  background: rgba(8, 14, 30, 0.5);
  backdrop-filter: blur(10px);
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  transition: opacity 0.28s ease, visibility 0.28s ease;
}

.calendar-modal.is-open {
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
}

.calendar-panel {
  width: min(560px, calc(100vw - 28px));
  max-height: min(86vh, 760px);
  overflow: auto;
  border: 1px solid color-mix(in oklab, var(--text-main) 23%, transparent 77%);
  border-radius: 18px;
  background: color-mix(in oklab, var(--bg-d) 58%, rgba(4, 7, 17, 0.92) 42%);
  box-shadow: 0 26px 70px rgba(0, 0, 0, 0.35);
  padding: 14px 14px 16px;
}

.calendar-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 8px;
}

.calendar-header .card-tag {
  margin: 0;
}

.calendar-close,
.calendar-nav-btn {
  border: 1px solid color-mix(in oklab, var(--text-main) 32%, transparent 68%);
  background: color-mix(in oklab, var(--bg-d) 44%, transparent 56%);
  color: var(--text-main);
  border-radius: 999px;
  padding: 6px 11px;
  font-size: 0.72rem;
  font-weight: 600;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  cursor: pointer;
}

.calendar-close:hover,
.calendar-close:focus-visible,
.calendar-nav-btn:hover,
.calendar-nav-btn:focus-visible {
  outline: none;
  background: color-mix(in oklab, var(--text-main) 14%, transparent 86%);
  border-color: color-mix(in oklab, var(--text-main) 56%, transparent 44%);
}

.calendar-nav {
  margin-top: 10px;
  display: grid;
  grid-template-columns: auto 1fr auto;
  gap: 8px;
  align-items: center;
}

.calendar-title {
  margin: 0;
  text-align: center;
  font-family: "Syne", sans-serif;
  font-size: clamp(1rem, 2.6vw, 1.25rem);
  font-weight: 400;
  letter-spacing: 0.03em;
}

.calendar-weekdays {
  margin-top: 12px;
  display: grid;
  grid-template-columns: repeat(7, minmax(0, 1fr));
  gap: 6px;
}

.calendar-weekdays span {
  text-align: center;
  font-size: 0.66rem;
  letter-spacing: 0.09em;
  text-transform: uppercase;
  color: var(--text-sub);
}

.calendar-grid {
  margin-top: 6px;
  display: grid;
  grid-template-columns: repeat(7, minmax(0, 1fr));
  gap: 6px;
}

.calendar-day {
  border: 1px solid color-mix(in oklab, var(--text-main) 22%, transparent 78%);
  background: color-mix(in oklab, var(--bg-d) 40%, transparent 60%);
  border-radius: 10px;
  min-height: 52px;
  display: grid;
  place-items: center;
  gap: 2px;
  color: var(--text-main);
  cursor: pointer;
  transition: border-color 0.22s ease, background-color 0.22s ease, transform 0.22s ease;
}

.calendar-day:hover,
.calendar-day:focus-visible {
  outline: none;
  transform: translateY(-1px);
  border-color: color-mix(in oklab, var(--text-main) 58%, transparent 42%);
}

.calendar-day-num {
  font-family: "Syne", sans-serif;
  font-size: 0.98rem;
  line-height: 1;
}

.calendar-day-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: transparent;
}

.calendar-day.is-checked {
  border-color: color-mix(in oklab, #7cffae 58%, transparent 42%);
  background: color-mix(in oklab, #7cffae 14%, transparent 86%);
}

.calendar-day.is-checked .calendar-day-dot {
  background: color-mix(in oklab, #7cffae 78%, transparent 22%);
}

.calendar-day.is-today {
  border-color: color-mix(in oklab, var(--accent) 68%, transparent 32%);
  box-shadow: inset 0 0 0 1px color-mix(in oklab, var(--accent) 45%, transparent 55%);
}

.calendar-day.is-outside {
  opacity: 0.55;
}

.calendar-note {
  margin: 11px 0 0;
  font-size: 0.76rem;
  letter-spacing: 0.04em;
  color: var(--text-sub);
}

body.calendar-open {
  overflow: hidden;
}

.hadith-text {
  margin: 0;
  font-family: "Playfair Display", serif;
  font-size: clamp(0.95rem, 1.35vw, 1.15rem);
  line-height: 1.55;
  color: color-mix(in oklab, var(--text-main) 90%, transparent 10%);
  transition: color 0.35s ease;
}

.hadith-source {
  margin: 9px 0 0;
  font-size: 0.78rem;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: var(--text-sub);
}

.hadith-card:hover .hadith-text,
.hadith-card:focus-within .hadith-text {
  color: color-mix(in oklab, var(--text-main) 97%, white 3%);
}

.ghost-btn {
  margin-top: 11px;
  border: 1px solid color-mix(in oklab, var(--text-main) 35%, transparent 65%);
  color: var(--text-main);
  background: transparent;
  border-radius: 999px;
  padding: 7px 14px;
  font-size: 0.75rem;
  font-weight: 600;
  letter-spacing: 0.07em;
  text-transform: uppercase;
  cursor: pointer;
  transition: background-color 0.24s ease, color 0.24s ease, border-color 0.24s ease;
}

.ghost-btn:hover,
.ghost-btn:focus-visible {
  outline: none;
  background: color-mix(in oklab, var(--text-main) 14%, transparent 86%);
  border-color: color-mix(in oklab, var(--text-main) 52%, transparent 48%);
}

.ambience-btn {
  right: clamp(14px, 2.2vw, 30px);
  bottom: clamp(14px, 2.2vw, 30px);
  border: 1px solid color-mix(in oklab, var(--text-main) 35%, transparent 65%);
  background: color-mix(in oklab, var(--bg-d) 46%, transparent 54%);
  color: var(--text-main);
  border-radius: 999px;
  padding: 11px 16px;
  font-size: clamp(0.72rem, 1vw, 0.85rem);
  font-weight: 600;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  cursor: pointer;
  backdrop-filter: blur(12px);
  transition: background-color 0.24s ease, border-color 0.24s ease, transform 0.24s ease;
}

.ambience-btn:hover,
.ambience-btn:focus-visible {
  outline: none;
  transform: translateY(-1px);
  background: color-mix(in oklab, var(--text-main) 12%, transparent 88%);
  border-color: color-mix(in oklab, var(--text-main) 56%, transparent 44%);
}

.ambience-btn[data-active="true"] {
  border-color: color-mix(in oklab, var(--accent) 74%, transparent 26%);
  background: color-mix(in oklab, var(--accent) 20%, transparent 80%);
}

body.is-ready .floating-ui {
  opacity: 1;
  transform: translateY(0);
}

body.is-ready .hero {
  opacity: 1;
  transform: translateY(0);
}

body.is-ready .top-bar {
  transition-delay: 0.2s;
}

body.is-ready .hero {
  transition-delay: 0.45s;
}

body.is-ready .hadith-card,
body.is-ready .fasting-card,
body.is-ready .ambience-btn {
  transition-delay: 0.85s;
}

@media (hover: hover) and (pointer: fine) {
  body.is-ready .cursor-glow {
    opacity: 1;
  }
}

@media (hover: none), (pointer: coarse) {
  .cursor-glow {
    display: none;
  }
}

@media (max-width: 860px) {
  .top-bar {
    align-items: center;
  }

  .meta {
    max-width: 56vw;
  }

  .hero {
    padding-top: 20vh;
  }

  .hadith-card {
    right: clamp(14px, 2.2vw, 30px);
    width: auto;
  }

  .fasting-card {
    top: clamp(118px, 32vh, 275px);
    width: min(290px, calc(100vw - 28px));
  }
}

@media (max-width: 660px) {
  html,
  body {
    min-height: 100dvh;
  }

  body {
    overflow-x: hidden;
    overflow-y: auto;
    padding-bottom: env(safe-area-inset-bottom, 0px);
  }

  .top-bar {
    position: sticky;
    left: auto;
    right: auto;
    top: 0;
    margin: 0 12px 10px;
    padding: calc(env(safe-area-inset-top, 0px) + 8px) 10px 8px;
    border: 1px solid color-mix(in oklab, var(--text-main) 22%, transparent 78%);
    border-radius: 14px;
    backdrop-filter: blur(10px);
    background: color-mix(in oklab, var(--bg-d) 46%, transparent 54%);
    align-items: flex-start;
    gap: 8px;
    transform: none;
    opacity: 1;
  }

  .brand-name {
    font-size: clamp(0.92rem, 4.2vw, 1.1rem);
  }

  .meta {
    max-width: 58vw;
  }

  .meta-line {
    font-size: clamp(0.64rem, 2.5vw, 0.78rem);
    letter-spacing: 0.06em;
  }

  .hero {
    min-height: 62vh;
    padding: 14vh 14px 22px;
  }

  .hero-label {
    letter-spacing: 0.11em;
    font-size: 0.68rem;
  }

  .countdown {
    font-size: clamp(2.65rem, 17vw, 5.8rem);
  }

  .countdown-hint {
    margin-top: 8px;
    font-size: clamp(0.86rem, 3.8vw, 1.02rem);
  }

  .hadith-card {
    position: static;
    margin: 0 12px 12px;
    padding: 13px 13px 12px;
    border-radius: 14px;
    transform: none;
    opacity: 1;
    transition-delay: 0s;
  }

  .fasting-card {
    position: static;
    width: auto;
    margin: 0 12px 12px;
    padding: 13px 13px 12px;
    border-radius: 14px;
    transform: none;
    opacity: 1;
    transition-delay: 0s;
  }

  .fasting-times {
    gap: 6px;
  }

  .fasting-time-item {
    padding: 8px 9px;
  }

  .ghost-btn {
    width: 100%;
    padding: 10px 14px;
  }

  .fasting-actions {
    grid-template-columns: 1fr;
    gap: 7px;
  }

  .calendar-panel {
    width: min(560px, calc(100vw - 20px));
    max-height: min(88vh, 760px);
    padding: 12px 10px 12px;
    border-radius: 14px;
  }

  .calendar-nav-btn,
  .calendar-close {
    padding: 7px 10px;
  }

  .calendar-day {
    min-height: 46px;
  }

  .ambience-btn {
    position: static;
    display: block;
    width: calc(100% - 24px);
    margin: 0 12px calc(18px + env(safe-area-inset-bottom, 0px));
    padding: 13px 16px;
    text-align: center;
    transform: none;
    opacity: 1;
    transition-delay: 0s;
  }

  body.is-ready .top-bar,
  body.is-ready .hadith-card,
  body.is-ready .fasting-card,
  body.is-ready .ambience-btn {
    transform: none;
  }
}

@media (max-width: 420px) {
  .hero {
    min-height: 58vh;
    padding-top: 12vh;
  }

  .countdown {
    font-size: clamp(2.3rem, 18.5vw, 4.8rem);
  }

  .fasting-status {
    font-size: 1rem;
  }

  .fasting-timing,
  .fasting-stats {
    font-size: 0.78rem;
  }

  .calendar-day {
    min-height: 42px;
    border-radius: 8px;
  }

  .calendar-day-num {
    font-size: 0.9rem;
  }
}

@keyframes sceneIn {
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes breathing {
  0% {
    transform: scale(0.98);
  }
  50% {
    transform: scale(1);
  }
  100% {
    transform: scale(0.98);
  }
}
